@model Epione.Web.Models.AppointmentVM

@{
    ViewBag.Title = "DetailsAsync";
    Layout = "~/Views/Shared/_LayoutDetails.cshtml";
}

<section id="about">
    <div class="container pb-0">
        <div class="row">
            <div class="col-md-4">
                <div class="border-10px p-30 pt-10 pb-0">
                    <h5><i class="fa fa-pencil-square-o text-theme-colored"></i> Need Help?</h5>
                    <p class="mt-0 text-uppercase">Just contact me for any information .. </p>

                    <!-- Appontment Form Starts -->
                   @using (Html.BeginForm("sendMail", "Appointment", FormMethod.Post, new { @class = "register-form form-transparent", @name = "reg-form" }))
                   {
                    @Html.AntiForgeryToken()


                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    @Html.HiddenFor(model => model.id)
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group mb-10">
                                    <input id="form_name" name="form_name" class="form-control" value="@Html.DisplayFor(model => model.patient.firstName) @Html.DisplayFor(model => model.patient.lastName) " type="text" required="" placeholder="Enter Name" aria-required="true" readonly>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group mb-10">
                                    <input id="form_email" name="form_email" class="form-control required email" value="@Html.DisplayFor(model => model.patient.email)" type="email" placeholder="Enter Email" aria-required="true" readonly>
                                </div>
                            </div>
                            
                        </div>
                        <div class="form-group mb-10">
                            <textarea id="form_message" name="form_message" class="form-control required" placeholder="Enter Message" rows="5" aria-required="true"></textarea>
                        </div>
                        <div class="form-group mb-0 mt-20">
                            <input id="form_botcheck" name="form_botcheck" class="form-control" type="hidden" value="">
                            <button type="submit" class="btn btn-dark btn-theme-colored" data-loading-text="send ">Remember</button>
                        </div>
                   }



                    <!-- Appointment Form Validation-->
                    <script type="text/javascript">
                $("#appointment_form_at_home").validate({
                  submitHandler: function(form) {
                    var form_btn = $(form).find('button[type="submit"]');
                    var form_result_div = '#form-result';
                    $(form_result_div).remove();
                    form_btn.before('<div id="form-result" class="alert alert-success" role="alert" style="display: none;"></div>');
                    var form_btn_old_msg = form_btn.html();
                    form_btn.html(form_btn.prop('disabled', true).data("loading-text"));
                    $(form).ajaxSubmit({
                      dataType:  'json',
                      success: function(data) {
                        if( data.status == 'true' ) {
                          $(form).find('.form-control').val('');
                        }
                        form_btn.prop('disabled', false).html(form_btn_old_msg);
                        $(form_result_div).html(data.message).fadeIn('slow');
                        setTimeout(function(){ $(form_result_div).fadeOut('slow') }, 6000);
                      }
                    });
                  }
                });
                    </script>
                    <!-- Appontment Form Ends -->
                </div>
            </div>
            
            <div class="col-md-4">
                <h3 class="text-gray-silver font-playfair mt-10 mt-sm-30 mb-0">About</h3>
                <h1 class="text-gray font-playfair mt-0">@Html.DisplayFor(model => model.title)</h1>
                <p><em>Date: @Html.DisplayFor(model => model.date_appointment)</em></p>
                <p><em>Start at :@Html.DisplayFor(model => model.start_Hour)</em></p>
                <p><em>End at :@Html.DisplayFor(model => model.end_Hour)</em></p>
                
                <p class="mt-20">Object:@Html.DisplayFor(model => model.object_appointment).</p>
                <p><em>With Mr :<strong>@Html.DisplayFor(model => model.doctor.firstName) - @Html.DisplayFor(model => model.doctor.lastName)</strong></em></p>
                <p class="mt-20"><img src="~/Content/MainTemplate/images/signature.png" alt=""></p>
                <a href="#" class="btn btn-default btn-lg mt-15 mb-md-30" onclick="getLocation()" id="localiser">Localiser Medecin</a>
                <script>
                   function getLocation() {
                    /*     if (navigator.geolocation) {
                            navigator.geolocation.getCurrentPosition(showPosition);
                            document.write(showPosition);
                        } else {
                            x.innerHTML = "Geolocation is not supported by this browser.";
                        }
                    }
                    function showPosition(position) {
                        x.innerHTML = "Latitude: " + position.coords.latitude +
                            "<br>Longitude: " + position.coords.longitude;
                        document.write(position.coords.latitude);
                    */

                   // document.getElementById('map_dhia').appendChild

                    e.preventDefault(); // Empêcher la page de se recharger
                    var adresse = "12 rue de palestine menzel abderrahmane"; // Nous récupérons le contenu du champ adresse
                    if (adresse != "") { // Si l'adresse n'est pas vide
                        var geocoder = new google.maps.Geocoder(); // On instancie le geocoder
                        geocoder.geocode({ 'address': adresse }, function (results, status) {
                            if (status == google.maps.GeocoderStatus.OK) { // Si l'adresse a été résolue
                                lat = results[0].geometry.location.lat(); // On récupère la latitude
                                lon = results[0].geometry.location.lng(); document.write(lat) // On récupère la longitude
                            } else {
                                alert("Something got wrong " + status);
                            }
                        });
                    }
                    }
                </script>
            </div>
            <div class="col-md-4">
                <img src="~/Content/MainTemplate/images/photos/home-img.png" alt="">
            </div>
        </div>
    </div>

</section>

   
        
<section id="contact" class="bg-deep">
    <div class="container pb-100">
        <div class="section-title">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 text-center">
                    <h2 class="font-playfair text-uppercase mt-0 mb-10">Get In Touch</h2>
                    <img class="mb-10" src="~/Content/MainTemplate/images/title-icon.png" alt="">
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Atque commodi molestiae autem fugit illo ipsa numquam, quod iusto enim.</p>
                </div>
            </div>
        </div>
        <div class="section-content">
            <div class="row">
                <div class="col-md-5">
                    <!-- Google Map HTML Codes -->
                    <div id="map_dhia" data-address="121 King Street, Melbourne Victoria 3000 Australia"
                         data-popupstring-id="#popupstring1"
                         class="map-canvas autoload-map"
                         data-mapstyle="style2"
                         data-height="420"
                         data-latlng="43.295309,5.374457",
                         data-title="sample title"
                         data-zoom="12"
                         data-marker="/Content/MainTemplate/images/map-marker.png">
                    </div>
                    <div class="map-popupstring hidden" id="popupstring1">
                        <div class="text-center">
                            <h3>Medinova Office</h3>
                            <p>121 King Street, Melbourne Victoria 3000 Australia</p>
                        </div>
                    </div>
                    <!-- Google Map Javascript Codes -->
                    <script src="http://maps.google.com/maps/api/js?key=AIzaSyDPIuR6EKoHIHFnOqr6WN_Q7_dNDy6Nwj8"></script>
                    <script src="~/Content/MainTemplate/js/google-map-init.js"></script>
                </div>

                <div class="col-md-7">
                    <h4 class="text-theme-colored line-bottom mt-0 mb-30 mt-sm-20">SEND US A MESSAGE</h4>
                    <!-- Contact Form -->
                    <form id="contact_form" name="contact_form" class="" action="" method="post">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group mb-30">
                                    <input id="form_name" name="form_name" class="form-control" type="text" placeholder="Enter Name" required="" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group mb-30">
                                    <input id="form_email" name="form_email" class="form-control required email" type="email" placeholder="Enter Email" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group mb-30">
                                    <input id="form_subject" name="form_subject" class="form-control required" type="text" placeholder="Enter Subject">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group mb-30">
                                    <input id="form_phone" name="form_phone" class="form-control" type="text" placeholder="Enter Phone">
                                </div>
                            </div>
                        </div>
                        <div class="form-group mb-30">
                            <textarea id="form_message" name="form_message" class="form-control required" rows="5" placeholder="Enter Message"></textarea>
                        </div>
                        <div class="form-group mb-30">
                            <input id="form_botcheck" name="form_botcheck" class="form-control" type="hidden" value="" />
                            <button type="submit" class="btn btn-dark btn-theme-colored btn-flat" data-loading-text="Please wait...">Send your message</button>
                        </div>
                    </form>
                    <!-- Contact Form Validation-->
                    <script type="text/javascript">
                        $("#contact_form").validate({
                            submitHandler: function (form) {
                                var form_btn = $(form).find('button[type="submit"]');
                                var form_result_div = '#form-result';
                                $(form_result_div).remove();
                                form_btn.before('<div id="form-result" class="alert alert-success" role="alert" style="display: none;"></div>');
                                var form_btn_old_msg = form_btn.html();
                                form_btn.html(form_btn.prop('disabled', true).data("loading-text"));
                                $(form).ajaxSubmit({
                                    dataType: 'json',
                                    success: function (data) {
                                        if (data.status == 'true') {
                                            $(form).find('.form-control').val('');
                                        }
                                        form_btn.prop('disabled', false).html(form_btn_old_msg);
                                        $(form_result_div).html(data.message).fadeIn('slow');
                                        setTimeout(function () { $(form_result_div).fadeOut('slow') }, 6000);
                                    }
                                });
                            }
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>
</section>






<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.id }) |
    @Html.ActionLink("Back to List", "Index")
</p>
